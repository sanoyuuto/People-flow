# Arduinoを用いた人流カウンター

## 制作物の概要
制作したものは二つの超音波センサ(HCSR-04)を使い、センサの前を通った人の人数とその通った方向(右から左か左から右)をキャラクターディスプレイ(LCD1602 Module)に表示するものである。また、人が通ったことを感知した場合は、ブザーから音が鳴るようになっている。 そして、 シリアルモニタには、 各センサに人が通った時に開始からの経過時間とセンサからの距離、通った人数の合計、右から左に通った人数、 左から右に通った人数の合計を表示する。

## プログラムの概要
各センサの前を人が通過した時間を格納する配列をそれぞれのセンサごとに定義する。そして、センサに反応があった場合は、時間の経過を測る関数mills()を使い計測開始からの経過時間を反応があったセンサの配列の0番目に格納する。 もし、二つのセンサの0番目の配列が、 0より大きくなった場合、 人が通ったと判断する。 また、この各センサの配列の０番目の大小関係を比較することで、 右から左に移動したか左から右に移動したかを判定する。 すべての動作(キャラクターディスプレイの通った人数更新, シリアルモニタに通った人数や各センサを通過した時間などを表示)が終了したら、 配列の初期化を行い同様の操作でセンサの前を通過した人数を計測する。

## 実行中の動画
https://user-images.githubusercontent.com/103728140/170539380-caddfd80-9b3a-4af9-9ca2-6602cd313c4e.mp4

## 回路図
以下に使用した回路図を示す.
HCSR-04二つとLCD1602 Module一つの合計三つを5V電源とGNDが共有するようにブレッドボード上で回路を作成した。また、 echoやTrigなどの各端子がプログラム上で設定した番号と一致するように回路が組まれている。
<img src="https://github.com/sanoyuuto/People-flow/blob/master/%E5%9B%9E%E8%B7%AF%E5%9B%B3.png" width="50%" />

